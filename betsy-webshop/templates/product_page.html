<!-- macro for inputerrors -->
{% macro with_errors(field) %} {% if field.errors %} {% set css_class =
'form-control form-control-lg is-invalid ' + kwargs.pop('class', '') %} {{
field(class=css_class, **kwargs) }}
<div class="invalid-feedback">
  {% for error in field.errors %}
  <small>{{ error|e }}</small>
  {% endfor %}
</div>

{% else %} {{ field(**kwargs) }} {% endif %} {% endmacro %}

<!-- macro for seperate input groups -->

{%- macro product_form_group(name="", input="", col=12, value="",id="",
infotext="", class="form-control border border-2 border-secondary") -%}
<div class="col-lg-{{col}} form-group my-3">
  <div class="input-group input-group-sm">
    <span
      class="
        input-group-text
        bg-secondary
        text-light
        border border-2 border-secondary
      "
      >{{name}}
    </span>
    {{with_errors(input, class=class, value=value, id=id) }}
  </div>
  <div class="form-text">{{infotext}}</div>
</div>
{%- endmacro -%}
<!-- endmacro -->

{% extends "base.html" %} {% block content %}

<!-- start product featurette -->
{% include 'account_base.html' %}

<div class="featurette container row mx-auto my-4">
  {% include 'product_in_profile.html' %}

  <form
    action="{{url_for('update_product', product_id=product.id)}}"
    method="POST"
    class="col-md-6 g-3 my-4"
  >
    {{ update_product_form.hidden_tag() }}
    <div class="d-flex justify-content-between">
      <h4 class="mb-2 fw-bolder">Update Product</h4>
      <span class="form-group" role="button">
        {{ update_product_form.update_product(class="btn btn-dark text-warning
        fw-bolder") }}
      </span>
    </div>

    <!-- productname -->
    {{product_form_group(input=update_product_form.name, name="Product Name",
    value=product.name)}}
    <!-- price_per_unit -->
    {{product_form_group(input=update_product_form.price_per_unit,
    name="â‚¬",value=product.price_per_unit, infotext="Seperate cents with dot :
    10.00")}}
    <!-- stock -->
    {{product_form_group(input=update_product_form.stock,
    name="Quantity",infotext="How many do you want to add?"
    , class="form-control form-select border border-2
    border-secondary")}}
    <!-- tags -->
    {{product_form_group(input=update_product_form.tags, name="Category",
    infotext="Separate Categories By Spaces", value=tags)}}
    <!-- description -->
    {{product_form_group(input=update_product_form.description,value=product.description,
    name="Description", infotext="Whatcha selling?")}}
    <!-- add_product -->
  </form>
</div>

{% endblock content %}
