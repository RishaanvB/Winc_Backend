{% extends 'base.html' %}
<!-- macro for inputerrors -->
{% block content %} {% macro with_errors(field) %} {% if field.errors %} {% set
css_class = 'form-control form-control-lg is-invalid ' + kwargs.pop('class', '')
%} {{ field(class=css_class, **kwargs) }}
<div class="invalid-feedback">
  {% for error in field.errors %}
  <small>{{ error|e }}</small>
  {% endfor %}
</div>

{% else %} {{ field(**kwargs) }} {% endif %} {% endmacro %}

<!-- Delete AccountModal -->
<div
  class="modal fade"
  id="deleteAccountModal"
  tabindex="-1"
  aria-labelledby="deleteAccountModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteAccountModalLabel">
          Delete your account?
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        Are you sure you want to permanently delete your account?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          No, just kidding
        </button>
        <a
          href="{{url_for('delete_user_account', user_id=current_user.id)}}"
          role="button"
          type="button"
          class="btn btn-danger"
          >Yes, get me out of here!!!</a
        >
      </div>
    </div>
  </div>
</div>

<!-- macro for seperate input groups -->
{% macro account_form_group(name="", input="", col=12, value="", textinfo="",
class="form-control border border-2 border-secondary") %}
<div class="form-group col-md-{{col}}">
  <div class="input-group input-group-sm">
    <span
      class="
        input-group-text
        bg-secondary
        text-light
        border border-2 border-secondary
      "
      >{{name}}
    </span>
    {{with_errors(input, class=class, value=value) }}
  </div>
  <div class="form-text">{{textinfo}}</div>
</div>
{% endmacro %}

<div class="container mb-3">
  <div class="row">
    <div class="col-lg-4 mt-4">
      <div class="position-sticky mt-4 container p-0" style="top: 6rem">
        <div class="mb-4">
          <button
            id="collapseProfileBtn"
            class="btn btn-warning text-dark fw-bolder"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#collapseProfileForm"
            aria-expanded="false"
            aria-controls="collapseProfileForm"
          >
            Change Profile
          </button>
          <div class="collapse" id="collapseProfileForm">
            <div class="card card-body border-0 p-0 mt-2">
              {% include "account_info_form.html" %}
            </div>
          </div>
        </div>
        <div>
          <button
            id="collapseProductBtn"
            class="btn btn-warning text-dark fw-bolder"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#collapseProductForm"
            aria-expanded="false"
            aria-controls="collapseProductForm"
          >
            Add Product
          </button>
          <div class="collapse" id="collapseProductForm">
            <div class="card card-body border-0 p-0 mt-2">
              {% include "add_product_form.html" %}
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-8 container ms-0">
      {% if not products %}
      <h4 class="text-center mt-4 me-auto">
        You have no products. Click the Add Product button on the left to add a
        product.
      </h4>
      {% endif %} {% include "featurette_product.html" %}
    </div>
  </div>
</div>
<!-- add product form -->
{% endblock content %}
