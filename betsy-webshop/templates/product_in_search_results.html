<div class="col" id="productID-{{product.id}}">
  <div class="card shadow-sm">
    <img
      src="{{  url_for('static', filename='/product_pics/' + product.product_pic)  }}"
      alt="{{ product.name }}"
    />

    <div class="card-body h-100">
      <div class="d-flex justify-content-between">
        <h4>{{ product.name }}</h4>

        <h5>â‚¬ {{ "%.2f"|format(product.price_per_unit) }}</h5>
      </div>

      <ul class="d-flex p-0 mb-0">
        {% if product.tags %} {% for producttags in product.tags %}
        <span class="pe-1 fs-small"> {{producttags.tag.name}}</span>
        {% endfor %} {% else %}
        <span class="pe-1 fs-small">This product has no categories.</span>
        {% endif %}
      </ul>

      <div class="d-flex text-warning py-1">
        <i class="bi bi-star-fill"></i>
        <i class="bi bi-star-fill mx-1"></i>
        <i class="bi bi-star-fill"></i>
        <i class="bi bi-star-half"></i>
      </div>
      <h6 class="text-muted my-0 mt-1 mb-2">
        Products available: {{product.stock}}
      </h6>

      <p class="card-text mt-2" style="min-height: 70px">
        Description: {% if product.description %} {{ product.description }} {%
        else %} This product does not have a description. {% endif %}
      </p>
      <div class="d-flex justify-content-between">
        {% if current_user.id == product.owner.id %} {% elif
        current_user.is_anonymous %}
        
        {% else %} {% if product.id in session['cart'] %}
        <a
          href="{{url_for('handle_product_in_cart', product_id=product.id)}}#productID-{{product.id}}"
          type="button"
          class="btn btn-light"
          role="button"
        >
          <i class="bi bi-cart-check" style="font-size: 1.3rem"></i>
        </a>
          {% else %}
        <a
          href="{{url_for('handle_product_in_cart', product_id=product.id)}}#productID-{{product.id}}"
          type="button"
          class="btn btn-warning"
          role="button"
        >
          <i class="bi bi-cart-plus" style="font-size: 1.3rem"></i>
        </a>
        {% endif %}
        <!-- start favorite -->
        {% if product.id in session['favorite'] %}
        <a
          href="{{url_for('handle_favorite', product_id=product.id)}}#productID-{{product.id}}"
          type="button"
          class="btn btn-warning"
          role="button"
        >
          <i class="bi bi-heart-fill" style="font-size: 1.3rem"></i>
        </a>
        {% else %}
        <a
        href="{{url_for('handle_favorite', product_id=product.id)}}#productID-{{product.id}}"
        type="button"
        class="btn btn-warning"
        role="button"
      >
        <i class="bi bi-heart" style="font-size: 1.3rem"></i>
      </a>
        {% endif %}
        {% endif %}
        <div class="text-muted fs-small m-0 p-0 ms-auto">
          <p class="m-0 text-end">
            Sold by: {% if current_user.username == product.owner.username %}
            <small>You</small>
            {% else %}
            <a
              class="text-success"
              href="{{url_for('user_profile', user_id=product.owner.id)}}"
              >{{ product.owner.username }}</a
            >
            {% endif %}
          </p>
          <p class="m-0">Since {{product.date_posted[0:10]}}</p>
        </div>
      </div>
    </div>
  </div>
</div>
